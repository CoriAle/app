<!-- START panel-->
<h3>Producción del Personal</h3>
<div ng-controller="ProduccionPersonalController as ctrl" class="row">
   <div class="col-sm-12 col-xs-12">
      <div class="form-group">
         <div class="row">
            <div class="col-sm-4">
               <label class="control-label">Fecha Hora Inicial</label>
            </div>
            <div class="col-sm-4">
               <label class="control-label">Fecha Hora Final</label>
            </div>
            <div class="col-sm-4">
               <label class="control-label">Nombre de Persona
                  <span>
                     <small>(En blanco para todos)</small>
                  </span>
               </label>
            </div>
         </div>
         <div class="row">
            <div class="col-sm-4">
               <p class="input-group">
                  <input type="text" name="date" required="" uib-datepicker-popup="{{ctrl.format}}" ng-model="ctrl.iniDate" is-open="ctrl.opened" uib-datepicker-options="ctrl.dateOptions" close-text="Cerrar" class="form-control" />
                  <span class="input-group-btn">
                     <button type="button" ng-click="ctrl.open($event)" class="btn btn-default">
                        <em class="fa fa-calendar"></em>
                     </button>
                  </span>
               </p>
               <table class="uib-timepicker ng-isolate-scope ng-not-empty ng-valid ng-valid-time ng-dirty ng-valid-parse ng-touched">
                  <tbody>
                     <tr class="text-center">
                        <td class="uib-increment hours">
                           <a ng-click="ctrl.incrementHours()" tabindex="0" class="btn btn-link">
                              <span class="glyphicon glyphicon-chevron-up"></span>
                           </a>
                        </td>
                        <td> </td>
                        <td class="uib-increment minutes">
                           <a ng-click="ctrl.incrementMinutes()" tabindex="0" class="btn btn-link">
                              <span class="glyphicon glyphicon-chevron-up"></span>
                           </a>
                        </td>
                        <td class="ng-hide"></td>
                     </tr>
                     <tr>
                        <td class="form-group uib-time hours">
                           <input style="width: 50px;" type="text" placeholder="HH" ng-model="ctrl.hoursini" maxlength="2" tabindex="0" class="form-control text-center ng-pristine ng-valid ng-not-empty ng-valid-maxlength ng-touched" />
                        </td>
                        <td class="uib-separator">:</td>
                        <td class="form-group uib-time minutes">
                           <input style="width:50px;" type="text" placeholder="MM" ng-model="ctrl.minutesini" maxlength="2" tabindex="0" class="form-control text-center ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-maxlength" />
                        </td>
                        <td class="uib-separator">&nbsp;</td>
                        <td style="cursor: pointer;" class="form-group uib-time minutes">
                           <input style="cursor: pointer; width:60px;" type="text" ng-model="ctrl.meridianos" maxlength="2" tabindex="0" ng-click="ctrl.toggleMeridian()" readonly="readonly" class="form-control text-center ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-maxlength"
                           />
                        </td>
                     </tr>
                     <tr class="text-center">
                        <td class="uib-decrement hours">
                           <a ng-click="ctrl.decrementHours()" tabindex="0" class="btn btn-link">
                              <span class="glyphicon glyphicon-chevron-down"></span>
                           </a>
                        </td>
                        <td> </td>
                        <td class="uib-decrement minutes">
                           <a ng-click="ctrl.decrementMinutes()" tabindex="0" class="btn btn-link">
                              <span class="glyphicon glyphicon-chevron-down"></span>
                           </a>
                        </td>
                        <td class="ng-hide"></td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <div class="col-sm-4">
               <p class="input-group">
                  <input type="text" name="date" min-date="ctrl.iniDate" max-date="ctrl.hoy" required="" uib-datepicker-popup="{{ctrl.format}}" ng-model="ctrl.finDate" is-open="ctrl.openend" uib-datepicker-options="ctrl.finDate" close-text="Cerrar" class="form-control"
                  />
                  <span class="input-group-btn">
                     <button type="button" ng-click="ctrl.openfin($event)" class="btn btn-default">
                        <em class="fa fa-calendar"></em>
                     </button>
                  </span>
               </p>
               <table class="uib-timepicker ng-isolate-scope ng-not-empty ng-valid ng-valid-time ng-dirty ng-valid-parse ng-touched">
                  <tbody>
                     <tr class="text-center">
                        <td class="uib-increment hours">
                           <a ng-click="ctrl.incrementHoursF()" tabindex="0" class="btn btn-link">
                              <span class="glyphicon glyphicon-chevron-up"></span>
                           </a>
                        </td>
                        <td> </td>
                        <td class="uib-increment minutes">
                           <a ng-click="ctrl.incrementMinutesF()" tabindex="0" class="btn btn-link">
                              <span class="glyphicon glyphicon-chevron-up"></span>
                           </a>
                        </td>
                        <td class="ng-hide"></td>
                     </tr>
                     <tr>
                        <td class="form-group uib-time hours">
                           <input style="width: 50px;" type="text" placeholder="HH" ng-model="ctrl.hoursfin" maxlength="2" tabindex="0" class="form-control text-center ng-pristine ng-valid ng-not-empty ng-valid-maxlength ng-touched" />
                        </td>
                        <td class="uib-separator">:</td>
                        <td class="form-group uib-time minutes">
                           <input style="width:50px;" type="text" placeholder="MM" ng-model="ctrl.minutesfin" maxlength="2" tabindex="0" class="form-control text-center ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-maxlength" />
                        </td>
                        <td class="uib-separator">&nbsp;
                           <td class="form-group uib-time minutes">
                              <input style="cursor: pointer; width:60px;" type="text" ng-model="ctrl.meridiano" maxlength="2" tabindex="0" ng-click="ctrl.toggleMeridianF()" readonly="readonly" class="form-control text-center ng-pristine ng-untouched ng-valid ng-not-empty ng-valid-maxlength"
                              />
                           </td>
                        </td>
                     </tr>
                     <tr class="text-center">
                        <td class="uib-decrement hours">
                           <a ng-click="ctrl.decrementHoursF()" tabindex="0" class="btn btn-link">
                              <span class="glyphicon glyphicon-chevron-down"></span>
                           </a>
                        </td>
                        <td> </td>
                        <td class="uib-decrement minutes">
                           <a ng-click="ctrl.decrementMinutesF()" tabindex="0" class="btn btn-link">
                              <span class="glyphicon glyphicon-chevron-down"></span>
                           </a>
                        </td>
                        <td class="ng-hide"></td>
                     </tr>
                  </tbody>
               </table>
            </div>
            <div class="col-sm-4">
               <input type="text" ng-model="ctrl.nombre" class="form-control" />
            </div>
         </div>
      </div>
      <div ng-init="ctrl.selectTipo(1)" class="form-group">
         <div class="col-sm-3">
            <div class="radio-inline c-radio c-radio-nofont">
               <label>
                  <input type="radio" ng-model="TipoFiltro" name="TipoFiltro" value="1" ng-change="ctrl.selectTipo(1)" />
                  <span></span>Todos</label>
            </div>
         </div>
         <div class="col-sm-3">
            <div class="radio-inline c-radio c-radio-nofont">
               <label>
                  <input type="radio" ng-model="TipoFiltro" name="TipoFiltro" value="2" ng-change="ctrl.selectTipo(2)" />
                  <span></span>Chicas</label>
            </div>
         </div>
         <div class="col-sm-3">
            <div class="radio-inline c-radio c-radio-nofont">
               <label>
                  <input type="radio" ng-model="TipoFiltro" name="TipoFiltro" value="3" ng-change="ctrl.selectTipo(3)" />
                  <span></span>Empleados</label>
            </div>
         </div>
         <div class="col-sm-3">
            <button type="button" ng-click="ctrl.filtro_pagos()" class="btn btn-info">
               <strong><i class="fa fa-search"></i>
               </strong>
            </button>
         </div>
      </div>
   </div>
   <br/>
   <hr/>
   <br/>
   <div class="col-sm-12">
      <div class="panel panel-primary">
         <div class="panel-heading">
            <strong>Lista de Empleados</strong>
         </div>
         <!-- START table-responsive-->
         <div class="table-responsive">
            <table class="table table-striped table-hover">
               <thead>
                  <tr>
                     <th width="10%">Nombre</th>
                     <th width="10%">Sueldo Base</th>
                     <th width="10%">Comisión Ventas</th>
                     <th width="10%">Comisión Botellas</th>
                     <th width="10%">Adelantos</th>
                     <th width="10%">Gastos</th>
                     <th width="10%">Bailes</th>
                     <th width="10%">Total</th>
                     <th width="7%">Acciones</th>
                  </tr>
               </thead>
               <tbody>
                  <tr ng-repeat="item in ctrl.items">
                     <td>{{ item.nombre }}</td>
                     <td>{{ item.sueldo | currency:'Q ' }}</td>
                     <td>{{ item.codigo_barra ? item.total_ventas : item.total_ventasp | currency:'Q ' }}</td>
                     <td>{{ item.total_servicios | currency:'Q ' }}</td>
                     <td style="color:#f77600;">{{ item.total_adelantos | currency:'Q ' }}</td>
                     <td style="color:#f77600;">{{ item.total_gastos | currency:'Q ' }}</td>
                     <td>{{ item.total_bailes | currency:'Q ' }}</td>
                     <td style="color:#1e983b;">{{ item.sueldo + item.total_ventas + item.total_ventasp + item.total_servicios - item.total_adelantos - item.total_gastos + item.total_bailes | currency:'Q ' }}</td>
                     <td align="center">
                        <btn-group class="btn-group-sm">
                           <button type="button" ui-sref="app.detalle_chica({id: item.id})" title="Ver detalle empleado" ng-if="item.codigo_barra==true" class="btn btn-purple"><i class="fa fa-search"></i>
                           </button>
                           <button type="button" ui-sref="app.detalle_chica({id: item.id})" title="Ver detalle empleado" ng-if="item.codigo_barra==false" class="btn btn-purple"><i class="fa fa-search"></i>
                           </button>
                        </btn-group>
                     </td>
                  </tr>
               </tbody>
            </table>
         </div>
         <!-- END table-responsive-->
         <!-- END panel-->
         <!-- Pagination - Panel Footer-->
      </div>
      <div class="panel-footer">
         <div class="row">
            <div class="col-sm-6">
               <uib-pagination previous-text="Anterior" next-text="Siguiente" first-text="Primero" last-text="Ultimo" total-items="ctrl.pagingInfo.totalItems" items-per-page="ctrl.pagingInfo.itemsPerPage" ng-model="ctrl.pagingInfo.page" max-size="10" rotate="false"
               ng-change="ctrl.selectPage(ctrl.pagingInfo.page)" boundary-links="true" class="pagination-sm"></uib-pagination>
            </div>
         </div>
      </div>
   </div>
</div>
<script type="text/ng-template" id="accionesPago.html">
   <div class="modal-header"><h3 class="modal-title">Ingreso Pago</h3><div class="modal-body"></div><div class="row"><div class="col-md-12"><form name="accion.formAdd" ng-submit="accion.addPago()" novalidate="" class="form-validate form-horizontal"><div class="form-group"><div class="col-sm-4"><label class="control-label">Motivo</label><select name="motivo" ng-model="accion.pago.motivo" required="" ng-options="m.nombre for m in accion.motivos track by m.nombre" class="form-control"><option value="">Seleccione una opcion</option></select><div ng-messages="accion.formAdd.motivo.$error" ng-show="accion.formAdd.motivo.$invalid &amp;&amp; !accion.formAdd.motivo.$pristine" class="text-danger"><div ng-message="required">Campo requerido</div></div></div><div class="col-sm-4"><label class="control-label">Monto</label><input placeholder="Monto" type="number" step="1" name="monto" ng-model="accion.pago.monto" required="" ng-min="0.01" class="form-control"/><div ng-messages="accion.formAdd.monto.$error" ng-show="accion.formAdd.monto.$invalid &amp;&amp; !accion.formAdd.monto.$pristine" class="text-danger"><div ng-message="required">Campo requerido</div><div ng-message="min">Debe ser mayor a 0</div></div></div><div class="col-sm-4"><label class="control-label">Empleado</label><select name="empleado" ng-model="accion.pago.persona" required="" ng-options="e.id as e.nombre for e in accion.listaEmpleados track by e.nombre" class="form-control"><option value="">Seleccione un empleado</option></select><div ng-messages="accion.formAdd.empleado.$error" ng-show="accion.formAdd.empleado.$invalid &amp;&amp; !accion.formAdd.empleado.$pristine" class="text-danger"><div ng-message="required">Campo requerido</div></div></div></div><div class="form-group col-sm-12"><label class="control-label">Observacion</label><textarea placeholder="Observación" name="observacion" ng-model="accion.pago.observacion" required="" class="form-control"></textarea><div ng-messages="accion.formAdd.observacion.$error" ng-show="accion.formAdd.observacion.$invalid &amp;&amp; !accion.formAdd.observacion.$pristine" class="text-danger"><div ng-message="required">Campo requerido</div><div ng-message="min">Debe ser mayor a 0</div></div></div></form></div></div></div><div ng-show="accion.errMsg" class="alert alert-danger">{{accion.errMsg}}</div><div ng-show="accion.agregarMsg" class="alert alert-info">{{accion.agregarMsg}}</div><div class="modal-footer"><button type="button" ng-click="accion.cancel()" class="btn btn-default"><i class="fa fa-times-circle"></i> Cancelar</button><button type="button" ng-disabled="accion.valida()" ng-click="accion.add()" ng-class="accion.pago.id &gt; 0 ? 'btn-warning':'btn-success'" class="btn btn-success"><i class="fa fa-floppy-o"></i> Guardar</button></div>
</script>